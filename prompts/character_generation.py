"""
角色生成Prompt模板
"""

def get_character_generation_prompt(world_name: str, world_description: str, 
                                  power_system: str, culture: str, 
                                  character_requirements: str) -> str:
    """
    获取角色生成prompt
    
    Args:
        world_name: 世界观名称
        world_description: 世界观描述
        power_system: 力量体系
        culture: 文化背景
        character_requirements: 角色要求
    
    Returns:
        格式化的prompt字符串
    """
    return f"""你是一个专业的修仙小说角色设计师。请根据给定的世界观和角色描述，生成一个完整的角色。

## 输入信息
- 世界观名称：{world_name}
- 世界观描述：{world_description}
- 力量体系：{power_system}
- 文化背景：{culture}
- 角色描述：{character_requirements}

## 生成要求

**核心原则：无论角色描述是否包含基本信息，都必须生成完整的角色数据！**

**重要说明：**
- 如果角色描述中没有明确指定姓名、年龄、性别等基本信息，请根据角色描述的内容、性格特点、能力特征等自行推断和生成
- 例如：描述"一个年轻的剑客" → 推断为男性，年龄18-25岁，生成符合剑客身份的名字
- 例如：描述"擅长快剑，性格孤傲" → 推断为男性，年龄20-30岁，生成体现孤傲特点的名字
- 例如：描述"一个神秘的女子" → 推断为女性，年龄25-35岁，生成神秘感的名字

请按照以下5个维度生成完整的角色信息：

### 1. 基础信息（必须完整，根据描述推断生成）
- **姓名**：根据角色描述的特征、身份、性格等生成符合修仙小说风格的名字
  - 剑客类：如"凌无尘"、"苏剑心"、"李孤鸿"
  - 法师类：如"云清雅"、"墨无痕"、"风清扬"
  - 神秘类：如"夜无月"、"影无踪"、"梦无痕"
- **年龄**：根据角色描述的身份定位设定合适的年龄
  - "年轻" → 18-25岁
  - "中年" → 30-45岁
  - "老者" → 50-70岁
  - 无明确描述 → 根据身份推断（如剑客通常20-30岁）
- **性别**：根据角色描述的语言特征、身份特点等确定性别
  - 从描述词汇、身份特征、能力特点等推断
  - 如果无法确定，默认选择符合修仙小说常见设定的性别
- **角色类型**：根据角色描述确定角色在故事中的重要性
  - 如果描述中明确提到"主角"、"主人公"、"主要角色" → 主角
  - 如果描述中明确提到"配角"、"次要角色"、"辅助角色" → 配角
  - 如果描述中明确提到"反派"、"敌人"、"对手" → 反派
  - 如果描述中明确提到"导师"、"师父"、"老师" → 导师
  - 如果描述中明确提到"盟友"、"伙伴"、"朋友" → 盟友
  - 如果无明确描述，根据角色描述的重要性推断（重要角色默认为主角）
- **外貌**：根据角色的身份、性格、能力特点生成简洁的外貌描述（50字以内）

### 2. 内在特质（必须完整）
- **性格**：根据角色描述生成3个核心性格特质
- **价值观**：根据角色背景生成核心信念和原则
- **恐惧**：根据角色经历生成最害怕的事物
- **欲望**：根据角色目标生成最渴望得到的东西

### 3. 能力设定（必须完整）
- **技能**：根据角色描述生成2-3个核心能力
- **弱点**：根据角色特点生成1-2个明显弱点
- **成长潜力**：根据角色背景生成未来发展空间

### 4. 社会关系（必须完整）
- **家族**：根据角色背景生成出身背景
- **师门**：根据世界观生成修炼门派或师父
- **朋友**：根据角色性格生成主要盟友
- **敌人**：根据角色背景生成主要对手

### 5. 成长弧线（必须完整）
- **初始状态**：根据角色描述生成故事开始时的状态
- **转折点**：根据角色背景生成关键变化时刻
- **最终目标**：根据角色欲望生成故事结束时的目标

## 输出格式

**严格按照以下JSON格式输出，所有字段都必须有具体值：**

{{
  "basic_info": {{
    "name": "角色姓名",
    "age": 年龄,
    "gender": "性别",
    "role_type": "角色类型",
    "appearance": "外貌描述"
  }},
  "personality": {{
    "traits": ["性格特质1", "性格特质2", "性格特质3"],
    "values": "价值观",
    "fears": "恐惧",
    "desires": "欲望"
  }},
  "abilities": {{
    "skills": ["技能1", "技能2", "技能3"],
    "weaknesses": ["弱点1", "弱点2"],
    "growth_potential": "成长潜力"
  }},
  "relationships": {{
    "family": "家族背景",
    "master": "师门关系",
    "friends": ["朋友1", "朋友2"],
    "enemies": ["敌人1", "敌人2"]
  }},
  "character_arc": {{
    "initial_state": "初始状态",
    "turning_point": "转折点",
    "final_goal": "最终目标"
  }}
}}

## 重要提醒

**必须生成完整的内容，所有字段都要有具体值！**

**关键要求：**
1. **基本信息推断**：即使角色描述中没有明确指定姓名、年龄、性别，也必须根据描述内容进行合理推断和生成
2. **数据完整性**：所有5个维度的数据都必须完整，不能有任何空字段
3. **格式正确性**：确保JSON格式完全正确，所有字段都有具体值
4. **内容质量**：角色设定要具体详细，为后续创作提供丰富素材

**禁止行为：**
- 不要出现空字段或"暂无"、"待定"、"待补充"等占位符
- 不要返回不完整的JSON结构
- 不要因为信息不足而省略任何字段

**补充原则：**
- 如果角色描述信息不足，请根据修仙小说的常见设定进行合理补充
- 根据角色的身份、能力、性格特点等推断缺失的信息
- 确保生成的角色符合修仙小说的世界观和设定"""


def get_batch_character_generation_prompt(world_name: str, world_description: str, 
                                        power_system: str, culture: str, 
                                        character_description: str, 
                                        character_count: int, 
                                        role_types: list) -> str:
    """
    获取批量角色生成prompt
    
    Args:
        world_name: 世界观名称
        world_description: 世界观描述
        power_system: 力量体系
        culture: 文化背景
        character_description: 角色描述（一句话）
        character_count: 角色数量
        role_types: 角色类型列表
    
    Returns:
        格式化的prompt字符串
    """
    role_types_str = "、".join(role_types)
    
    return f"""你是一个专业的修仙小说角色设计师。请根据给定的世界观和角色描述，批量生成{character_count}个符合故事发展的角色。

## 输入信息
- 世界观名称：{world_name}
- 世界观描述：{world_description}
- 力量体系：{power_system}
- 文化背景：{culture}
- 角色描述：{character_description}
- 角色数量：{character_count}个
- 角色类型：{role_types_str}

## 生成要求

请按照以下规则生成角色：

### 角色类型分配
- 根据提供的角色类型列表，合理分配每个角色的类型
- 确保角色类型分布合理，符合故事需要
- 每个角色都要有明确的定位和作用

### 角色差异化
- 每个角色都要有独特的性格、背景和能力
- 避免角色过于相似或重复
- 确保角色之间能够形成有趣的互动和冲突

### 角色关系设计
- 考虑角色之间的潜在关系（师徒、朋友、敌人、竞争对手等）
- 为后续剧情发展留下空间
- 确保角色关系符合逻辑

## 输出格式

**严格按照以下JSON格式输出：**
{{
  "characters": [
    {{
      "basic_info": {{
        "name": "角色姓名",
        "age": 年龄,
        "gender": "性别",
        "appearance": "外貌描述",
        "role_type": "角色类型"
      }},
      "personality": {{
        "traits": ["性格特质1", "性格特质2", "性格特质3"],
        "values": "价值观",
        "fears": "恐惧",
        "desires": "欲望"
      }},
      "abilities": {{
        "skills": ["技能1", "技能2", "技能3"],
        "weaknesses": ["弱点1", "弱点2"],
        "growth_potential": "成长潜力"
      }},
      "relationships": {{
        "family": "家族背景",
        "master": "师门关系",
        "friends": ["朋友1", "朋友2"],
        "enemies": ["敌人1", "敌人2"]
      }},
      "character_arc": {{
        "initial_state": "初始状态",
        "turning_point": "转折点",
        "final_goal": "最终目标"
      }}
    }}
  ]
}}

## 注意事项

1. 必须生成{character_count}个角色，不能多也不能少
2. 每个角色都要符合世界观设定
3. 角色类型要合理分配，不能全部都是同一种类型
4. 角色之间要有差异化，避免重复
5. 为每个角色设计合理的关系网络
6. 确保JSON格式完全正确

## 重要提醒

**必须生成完整的内容，所有字段都要有具体值！**
- 确保JSON格式正确
- 不要出现空字段或"暂无"等占位符
- 角色设定要具体详细，为后续创作提供丰富素材
- 严格按照要求的数量生成角色"""
